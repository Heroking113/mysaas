(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{305:function(t,e,a){"use strict";a.r(e);var n=a(321);var i=a(309);for(var s in i)if(s!=="default")(function(t){a.d(e,t,function(){return i[t]})})(s);var l=a(318);var o=a(12);var r=Object(o["a"])(i["default"],n["a"],n["b"],false,null,"58f131a1",null);e["default"]=r.exports},309:function(t,e,a){"use strict";a.r(e);var n=a(310);var i=a.n(n);for(var s in n)if(s!=="default")(function(t){a.d(e,t,function(){return n[t]})})(s);e["default"]=i.a},310:function(t,e,a){"use strict";var n=a(3);Object.defineProperty(e,"__esModule",{value:true});e.default=void 0;var i=n(a(98));var s=n(a(99));var l={components:{},data:function t(){return{HostData:[],BusinessData:[],bk_biz_id:"",MissionData:[],content:"",selected_bk_biz_id:"",selected_script_content:"",selected_hosts:[]}},created:function t(){var e=this;this.$http.get("/query_all_info/").then(function(t){if(t.data.result){var a=t.data.data;if(a.host_data){e.HostData=a.host_data}if(a.business_data){e.BusinessData=a.business_data}e.MissionData=a.mission_data;e.BusinessData.unshift({bk_biz_id:0,bk_biz_name:"所有任务"})}else{e.$message.error("获取信息失败！")}})},mounted:function t(){(0,i.default)("#execute").click(function(){(0,i.default)("#execute").css("background","#008272")})},methods:{onSubmit:function t(){var e={bk_biz_id:this.selected_bk_biz_id,business_name:(0,i.default)("#cur_business").val(),mission_name:(0,i.default)("#cur_mission").val(),host_list:JSON.stringify(this.selected_hosts)};console.log("params:",e);this.$http.post("/execute_script/",e).then(function(t){console.log(t)})},goRecord:function t(){this.$router.push({path:window.PROJECT_CONFIG.SITE_URL+"task-record"})},get_select_business_label:function t(e){var a=this;this.selected_bk_biz_id=e;var n="/query_host_by_business/?bk_biz_id="+this.selected_bk_biz_id;this.$http.get(n).then(function(t){if(t.data.result){a.HostData=t.data.data}else{a.$message.error("获取当前业务下的主机信息失败！")}})},get_select_script_content:function t(e){this.selected_script_content=e},handleSelectionChange:function t(e){this.selected_hosts=e}}};e.default=l},311:function(t,e,a){},318:function(t,e,a){"use strict";var n=a(311);var i=a.n(n);var s=i.a},321:function(t,e,a){"use strict";var n=function(){var t=this;var e=t.$createElement;var a=t._self._c||e;return a("div",[a("el-container",[a("el-header",{staticClass:"head-left-content"},[a("el-button",{staticClass:"navibar-button-style",staticStyle:{"background-color":"#0a6659"},attrs:{id:"execute",type:"primary"}},[t._v("执行任务")]),t._v(" "),a("el-button",{staticClass:"navibar-button-style",attrs:{type:"primary"},on:{click:t.goRecord}},[t._v("任务记录")])],1)],1),t._v(" "),a("div",{staticClass:"table-style"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:true}},[a("el-form-item",{attrs:{label:"选择业务"}},[a("el-select",{ref:"select_business",staticStyle:{width:"160px"},attrs:{id:"cur_business",placeholder:"请选择"},on:{change:t.get_select_business_label},model:{value:t.bk_biz_id,callback:function(e){t.bk_biz_id=e},expression:"bk_biz_id"}},t._l(t.BusinessData,function(t){return a("el-option",{key:t.bk_biz_id,attrs:{label:t.bk_biz_name,value:t.bk_biz_id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"选择任务"}},[a("el-select",{ref:"select_script",staticStyle:{width:"280px"},attrs:{id:"cur_mission",placeholder:"请选择"},on:{change:t.get_select_script_content},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}},t._l(t.MissionData,function(t){return a("el-option",{key:t.mission_content,attrs:{label:t.mission_name,value:t.mission_content}})}),1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("执行")])],1)],1),t._v(" "),a("hr",{staticStyle:{FILTER:"alpha(opacity=100,finishopacity=0,style=3)"},attrs:{width:"100%",color:"gray",size:"1"}}),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.HostData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bk_cloud_id",label:"云区域ID",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bk_cpu",label:"核数",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bk_os_name",label:"操作系统",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bk_host_innerip",label:"内网IP",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bk_host_id",label:"主机ID",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bk_os_bit",label:"位数",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"create_time",label:"创建时间",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault();t.deleteRow(e.$index,t.tableData)}}},[t._v("待定")])]}}])})],1)],1)],1)};var i=[];a.d(e,"a",function(){return n});a.d(e,"b",function(){return i})}}]);